# s3

Stores vCons in Amazon S3 or S3-compatible storage.

## Configuration

```yaml
storages:
  s3:
    module: storage.s3
    options:
      aws_access_key_id: your-access-key
      aws_secret_access_key: your-secret-key
      aws_bucket: vcon-archive
      aws_region: us-east-1
```

## Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `aws_access_key_id` | string | Required | AWS access key |
| `aws_secret_access_key` | string | Required | AWS secret key |
| `aws_bucket` | string | Required | S3 bucket name |
| `aws_region` | string | `us-east-1` | AWS region |
| `s3_path` | string | `""` | Key prefix |
| `endpoint_url` | string | None | Custom endpoint (for S3-compatible) |

## Example

### Amazon S3

```yaml
storages:
  s3:
    module: storage.s3
    options:
      aws_access_key_id: ${AWS_ACCESS_KEY_ID}
      aws_secret_access_key: ${AWS_SECRET_ACCESS_KEY}
      aws_bucket: company-vcon-archive
      aws_region: us-west-2
      s3_path: vcons/production/
```

### MinIO (S3-Compatible)

```yaml
storages:
  minio:
    module: storage.s3
    options:
      aws_access_key_id: minioadmin
      aws_secret_access_key: minioadmin
      aws_bucket: vcons
      endpoint_url: http://minio:9000
```

### DigitalOcean Spaces

```yaml
storages:
  spaces:
    module: storage.s3
    options:
      aws_access_key_id: ${DO_SPACES_KEY}
      aws_secret_access_key: ${DO_SPACES_SECRET}
      aws_bucket: my-space
      aws_region: nyc3
      endpoint_url: https://nyc3.digitaloceanspaces.com
```

## Object Structure

vCons are stored as JSON files:

```
s3://bucket/vcons/production/abc-123-def.json
```

Content:

```json
{
  "vcon": "0.0.1",
  "uuid": "abc-123-def",
  "created_at": "2024-01-15T10:30:00Z",
  ...
}
```
